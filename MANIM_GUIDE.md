# Guide: Adding Manim Animations to Quarto Presentations

## Directory Structure

```
presentations/
└── week02_linear_regression/
    ├── week02_presentation.qmd
    └── animations/
        ├── README.md
        ├── generate_all.sh
        ├── gradient_descent.py          # Manim scripts
        ├── normal_equations.py
        └── media/                        # Auto-generated by Manim
            └── videos/
                └── [script_name]/
                    └── 1080p60/
                        └── [SceneName].mp4
```

## Workflow

### 1. Write Manim Animation

Create a Python file in the `animations/` folder:

```python
from manim import *

class MyAnimation(Scene):
    def construct(self):
        # Your animation code here
        text = Text("Hello World!")
        self.play(Write(text))
        self.wait()
```

### 2. Generate Video

```bash
cd animations/
manim -pqh my_animation.py MyAnimation
```

This creates: `media/videos/my_animation/1080p60/MyAnimation.mp4`

### 3. Embed in Quarto Slide

In your `.qmd` file:

```markdown
## My Slide Title

Some content...

:::{.fragment}
### Visualization

![](animations/media/videos/my_animation/1080p60/MyAnimation.mp4){width="70%"}
:::
```

## Video Sizing Options

- `{width="50%"}` - Half slide width
- `{width="70%"}` - Most common for animations
- `{width="100%"}` - Full width
- `{height="500px"}` - Fixed height

## Video Controls

Add controls for interactive playback:

```markdown
![](animations/media/videos/my_animation/1080p60/MyAnimation.mp4){width="70%" controls="true"}
```

## Quality vs. File Size

| Flag | Resolution | Use Case | File Size |
|------|-----------|----------|-----------|
| `-pql` | 480p | Quick preview | Small |
| `-pqm` | 720p | Draft slides | Medium |
| `-pqh` | 1080p | **Final presentation** | Large |
| `-pqk` | 4K | Ultra HD displays | Very large |

## Tips for Aerospace Animations

### 1. Data Visualization
```python
# Plot drag polar with annotations
axes = Axes(x_range=[0, 15], y_range=[0, 0.1])
drag_curve = axes.plot(lambda alpha: 0.015 + 0.04*alpha**2)
```

### 2. Vector/Matrix Operations
```python
# Show matrix multiplication
matrix = Matrix([[1, 2], [3, 4]])
vector = Matrix([[5], [6]])
```

### 3. 3D Visualization
```python
# Use ThreeDScene for 3D plots
class My3DScene(ThreeDScene):
    def construct(self):
        axes = ThreeDAxes()
        self.set_camera_orientation(phi=75*DEGREES, theta=30*DEGREES)
```

### 4. Coordinate Systems
```python
# Transform between coordinate frames
plane = NumberPlane()
vector = Arrow(ORIGIN, [2, 1, 0], buff=0)
```

## Common Issues

### Issue: Video not found
**Solution**: Check the exact path. Manim creates:
`animations/media/videos/[filename]/[quality]/[SceneName].mp4`

### Issue: Video too large
**Solution**: Use `-pqm` for smaller files or compress with:
```bash
ffmpeg -i input.mp4 -vcodec libx264 -crf 23 output.mp4
```

### Issue: Animation not smooth
**Solution**: Use `self.wait()` between major transitions

## Best Practices

1. **Keep animations short** (10-30 seconds ideal)
2. **Use fragments** to control when animation appears
3. **Test rendering** with `-pql` first (fast)
4. **Add labels** and text to guide viewers
5. **Match colors** to presentation theme
6. **Generate all at once** using `generate_all.sh`

## Color Palette for Consistency

Match your presentation theme:
```python
# Custom colors
AERO_BLUE = "#4A9FD8"
AERO_GOLD = "#FF9F5A"
AERO_RED = "#C85A54"
AERO_GREEN = "#5AC18E"

# Use in Manim
line = Line(ORIGIN, [1, 1, 0], color=AERO_BLUE)
```

## Example: Complete Animation

```python
from manim import *

class DragCoefficientDemo(Scene):
    def construct(self):
        # Title
        title = Text("Drag Coefficient vs. Angle of Attack", font_size=40)
        title.to_edge(UP)
        self.play(Write(title))
        
        # Axes
        axes = Axes(
            x_range=[0, 20, 5],
            y_range=[0, 0.15, 0.05],
            x_length=8,
            y_length=5,
            axis_config={"include_numbers": True}
        )
        
        # Labels
        x_label = MathTex(r"\alpha \text{ (deg)}", font_size=32)
        x_label.next_to(axes.x_axis, DOWN)
        y_label = MathTex(r"C_D", font_size=32)
        y_label.next_to(axes.y_axis, LEFT)
        
        self.play(Create(axes), Write(x_label), Write(y_label))
        
        # Plot curve
        drag_curve = axes.plot(
            lambda alpha: 0.02 + 0.0003 * alpha**2,
            color=BLUE,
            x_range=[0, 20]
        )
        
        self.play(Create(drag_curve), run_time=2)
        
        # Annotation
        min_point = Dot(axes.c2p(0, 0.02), color=RED)
        min_label = MathTex(r"C_{D,\min}", color=RED, font_size=28)
        min_label.next_to(min_point, RIGHT)
        
        self.play(FadeIn(min_point), Write(min_label))
        self.wait(2)
```

Generate with:
```bash
manim -pqh my_script.py DragCoefficientDemo
```

Embed with:
```markdown
![](animations/media/videos/my_script/1080p60/DragCoefficientDemo.mp4){width="80%"}
```
